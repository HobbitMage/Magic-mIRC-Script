[aliases]
n0=;###################prefs########################
n1=ctcp.finger.ans { return [ [ %str.finger.ans ] ] }
n2=quit.msg { return [ [ %str.quit.mes ] ] }
n3=
n4=;##################options#######################
n5=;###################mouse########################
n6=click.status { echo %colors.system -t [ [ %str.status.click ] ] }
n7=click.query { whois $1 }
n8=click.channel { channel }
n9=click.nick { nick.insert $1- }
n10=click.notify { whois $1 }
n11=click.mes { whois $1 }
n12=
n13=;##################standarts#####################
n14=whois { .raw whois $$1- $iif((%prefs.whois.show.idle == 1) && (!$2),$$1) }
n15=mcom {
n16=  if ($scon(0) == 1) { $1 $2- | return }
n17=  scid -at1 $1 $2-
n18=}
n19=maway mcom away $1-
n20=mquit mcom quit $1-
n21=mnick mcom nick $1
n22=away { 
n23=  var %state, %awaycmd = %prefs.away.mesmode , %i = 1, %colorchans, %ncolorchans, %awaymes, %color
n24=  if ((!$away) && ($1)) %state = go.away
n25=  if (($away) && ($1)) %state = ch.away
n26=  if ((!$away) && (!$1)) %state = no.away
n27=  if (($away) && (!$1)) %state = re.away
n28=  if ((%state == ch.away) && ($1- == $awaymsg)) %state = nc.away
n29=  if (%prefs.away.mes) {
n30=    while (%i <= $chan(0)) {
n31=      %color = $changet($chan(%i),colors)
n32=      if ((%color == 1) || (((%color == 2) || (%color == $null)) && (c !isincs $chan(%i).mode))) {
n33=        if (!$changet($chan(%i),aways)) %colorchans = $addtok(%colorchans,$chan(%i),44)
n34=      }
n35=      else { if (!$changet($chan(%i),aways)) %ncolorchans = $addtok(%ncolorchans,$chan(%i),44) }
n36=      inc %i
n37=    }
n38=  }
n39=  if (%state == go.away) {
n40=    if (%prefs.away.nickmode == 1) { %oldnick [ $+ [ $cid ] ] = $me | if ($me != %str.away.nick) nick %str.away.nick }
n41=    if (%prefs.away.nickmode == 3) { %oldnick [ $+ [ $cid ] ] = $me | if ($me != %oldnick [ $+ [ $cid ] ] $+ %str.away.end) nick $me $+ %str.away.end }
n42=    if (%prefs.away.nickmode == 2) { %oldnick [ $+ [ $cid ] ] = $me | if ($me != %str.away.pre $+ %oldnick [ $+ [ $cid ] ] ) nick %str.away.pre $+ $me }
n43=    if (%prefs.away.nickmode == 4) { %oldnick [ $+ [ $cid ] ] = $me | if ($me != %str.away.pre $+ %oldnick [ $+ [ $cid ] ]  $+ %str.away.end) nick %str.away.pre $+ $me $+ %str.away.end }
n44=    if (%prefs.away.mes) {
n45=      if ($istok(notice msg,%awaycmd,32)) %awaymes = [ [ %str.away.msg ] ]
n46=      if (%awaycmd == describe) %awaymes = ACTION [ [ %str.away.msg ] ] $+ 
n47=      if (%awaycmd) echo -at $iif((%colorchans $+ %ncolorchans) && ($activecid != $cid),$network $+ :) $iif(%colorchans $+ %ncolorchans,10Об уходе сообщено:) $iif(%colorchans,с цветами на %colorchans $+ 10) $iif(%ncolorchans,без цветов на %ncolorchans)
n48=    }
n49=    echo %colors.mode -at [ [ %str.away.msg ] ]
n50=    .timeraway $+ $cid 0 $calc(60 * %nums.away.rep.mins) away.rep.msg
n51=  }
n52=  if (%state == re.away) {
n53=    if (%prefs.away.nickmode && (%oldnick [ $+ [ $cid ] ] ) && (%oldnick [ $+ [ $cid ] ] != $me)) { nick %oldnick [ $+ [ $cid ] ] | unset %oldnick [ $+ [ $cid ] ] }
n54=    if (%prefs.away.mes) {
n55=      if ($istok(notice msg,%awaycmd,32)) %awaymes = [ [ %str.away.return ] ]
n56=      if (%awaycmd == describe) %awaymes = ACTION [ [ %str.away.return ] ] $+ 
n57=      if (%awaycmd) echo -at $iif((%colorchans $+ %ncolorchans) && ($activecid != $cid),$network $+ :) $iif(%colorchans $+ %ncolorchans,10О возвращении сообщено:) $iif(%colorchans,с цветами на %colorchans $+ 10) $iif(%ncolorchans,без цветов на %ncolorchans)
n58=    }
n59=    echo %colors.mode -at [ [ %str.away.return ] ]
n60=    .timeraway $+ $cid off
n61=  }
n62=  if (%state == ch.away) {
n63=    if (%prefs.away.mes) {
n64=      if ($istok(notice msg,%awaycmd,32)) %awaymes = [ [ %str.away.change ] ]
n65=      if (%awaycmd == describe) %awaymes = ACTION [ [ %str.away.change ] ] $+ 
n66=      if (%awaycmd) echo -at $iif((%colorchans $+ %ncolorchans) && ($activecid != $cid),$network $+ :) $iif(%colorchans $+ %ncolorchans,10О смене причины ухода сообщено:) $iif(%colorchans,с цветами на %colorchans $+ 10) $iif(%ncolorchans,без цветов на %ncolorchans)
n67=    }
n68=    echo %colors.mode -at  [ [ %str.away.change ] ]
n69=    .timeraway $+ $cid 0 $calc(60 * %nums.away.rep.mins) away.rep.msg
n70=  }
n71=  if (%state == no.away) {
n72=  }
n73=  if (%state == nc.away) {
n74=    echo -at %str.away.nochange
n75=    return
n76=  }
n77=  if (%prefs.away.mes) {
n78=    if (%awaycmd)  {
n79=      if ($istok(describe msg,%awaycmd,32)) %awaycmd = .raw privmsg
n80=      if (%awaycmd == notice) %awaycmd = .raw NOTICE
n81=    }
n82=    if (%colorchans) %awaycmd %colorchans : $+ %awaymes
n83=    if (%ncolorchans) %awaycmd %ncolorchans : $+ $strip(%awaymes)
n84=  }
n85=  .raw away : $+ $1-
n86=}
n87=
n88=away.rep.msg {
n89=  if (!%prefs.away.mesmid || (!$away)) return
n90=  if (%prefs.away.mes) return
n91=  var %awaycmd = %prefs.away.mesmode , %i = 1, %colorchans, %ncolorchans, %awaymes, %color
n92=  if (%awaycmd) {
n93=    while (%i <= $chan(0)) {
n94=      %color = $changet($chan(%i),colors)
n95=      if ((%color == 1) || (((%color == 2) || (%color  == $null)) && (c !isincs $chan(%i).mode))) {
n96=      if (!$changet($chan(%i),aways))  %colorchans = $addtok(%colorchans,$chan(%i),44) }
n97=      else {  if (!$changet($chan(%i),aways))  %ncolorchans = $addtok(%ncolorchans,$chan(%i),44) }
n98=      inc %i
n99=    }
n100=  }
n101=  if ($istok(notice msg,%awaycmd,32)) %awaymes = [ [ %str.away.repeat ] ]
n102=  if (%awaycmd == describe) %awaymes = ACTION [ [ %str.away.repeat ] ] $+ 
n103=  if ($istok(describe msg,%awaycmd,32)) %awaycmd = .raw privmsg
n104=  if (%awaycmd == notice) %awaycmd = .raw NOTICE
n105=
n106=  if (%colorchans) %awaycmd %colorchans : $+ %awaymes
n107=  if (%ncolorchans) %awaycmd %ncolorchans : $+ $strip(%awaymes)
n108=  if ((%colorchans) || (%ncolorchans)) echo -a $iif(%colorchans %ncolorchans,10Об отсутствии сообщено:) $iif(%colorchans,с цветами на %colorchans $+ 10) $iif(%ncolorchans,без цветов на %ncolorchans)
n109=}
n110=
n111=;####################help########################
n112=key.layout {
n113=  window -ak0z @Раскладка
n114=  clear @Раскладка
n115=  aline %colors.system @Раскладка F1 Открыть файл помощи
n116=  aline %colors.system @Раскладка F2
n117=  aline %colors.system @Раскладка F3
n118=  aline %colors.system @Раскладка F4
n119=  aline %colors.system @Раскладка F5 Перемешать строку
n120=  aline %colors.system @Раскладка F6 Сообщение на все открытые каналы
n121=  aline %colors.system @Раскладка F7 Действие (№ник заменяется на выделенный ник)
n122=  aline %colors.system @Раскладка F8 Действие на все каналы
n123=  aline %colors.system @Раскладка F9
n124=  aline %colors.system @Раскладка F10
n125=  aline %colors.system @Раскладка F11
n126=  aline %colors.system @Раскладка F12
n127=  aline %colors.system @Раскладка -
n128=  aline %colors.system @Раскладка Control+F1
n129=  aline %colors.system @Раскладка Control+F2
n130=  aline %colors.system @Раскладка Control+F3
n131=  aline %colors.system @Раскладка Control+F4
n132=  aline %colors.system @Раскладка Control+F5 Пробел после каждой буквы
n133=  aline %colors.system @Раскладка Control+F6
n134=  aline %colors.system @Раскладка Control+F7
n135=  aline %colors.system @Раскладка Control+F8
n136=  aline %colors.system @Раскладка Control+F9 Перевод строки на русский
n137=  aline %colors.system @Раскладка Control+F10 Перевод строки на английский
n138=  aline %colors.system @Раскладка Control+F11
n139=  aline %colors.system @Раскладка Control+F12
n140=  aline %colors.system @Раскладка -
n141=  aline %colors.system @Раскладка Shift+F1
n142=  aline %colors.system @Раскладка Shift+F2
n143=  aline %colors.system @Раскладка Shift+F3
n144=  aline %colors.system @Раскладка Shift+F4
n145=  aline %colors.system @Раскладка Shift+F5 Раскраска строки радугой
n146=  aline %colors.system @Раскладка Shift+F6 Сообщение на все открытые каналы
n147=  aline %colors.system @Раскладка Shift+F7 Действие на канал
n148=  aline %colors.system @Раскладка Shift+F8 Действие на все каналы
n149=  aline %colors.system @Раскладка Shift+F9
n150=  aline %colors.system @Раскладка Shift+F10
n151=  aline %colors.system @Раскладка Shift+F11
n152=  aline %colors.system @Раскладка Shift+F12
n153=}
n154=
n155=key.ascii {
n156=  window -ak0z  @ASCII
n157=  clear @ASCII
n158=  var %i = 0,%str, %j = 1
n159=  while (%i <= 255) {
n160=    ;    %str = %str $chr(127) %i $+ $chr(9) $+ $chr( $+ $iif(!$istok(2 9 22 31,%i,32),%i) $+ ) $+ $chr(9)
n161=    %str = %str  $+ %colors.info $+ $chr(127) $+  $str(0,$calc(4 - $len(%i))) $+ %i $iif(!$istok(0 2 3 9 15 22 31,%i,32), $+ %colors.highlight $+ $chr(%i) $+ , $+ %colors.info $+ -)
n162=    if (%j = 8) { echo %colors.normal @ASCII %str  $+ %colors.info $+ $chr(127) | %str = $null | %j = 0 }
n163=    inc %i | inc %j
n164=  }
n165=  if (%str) echo %colors.normal @ASCII %str
n166=}
