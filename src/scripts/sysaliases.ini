[aliases]
n0=;###################prefs########################
n1=ctcp.finger.ans { return [ [ %str.finger.ans ] ] }
n2=quit.msg { return [ [ %str.quit.mes ] ] }
n3=
n4=;##################options#######################
n5=;###################mouse########################
n6=click.status { echo %colors.system -t [ [ %str.status.click ] ] }
n7=click.query { whois $1 }
n8=click.channel { channel }
n9=click.nick { nick.insert $1- }
n10=click.notify { whois $1 }
n11=click.mes { whois $1 }
n12=
n13=;##################standarts#####################
n14=whois { .raw whois $$1- $iif((%prefs.whois.show.idle == 1) && (!$2),$$1) }
n15=mcom {
n16=  if ($scon(0) == 1) { $1 $2- | return }
n17=  scid -at1 $1 $2-
n18=}
n19=maway mcom away $1-
n20=mquit mcom quit $1-
n21=mnick mcom nick $1
n22=away { 
n23=  var %state, %i = 1, %colorchans, %ncolorchans, %awaymes, %color, %awaycmd, %message
n24=
n25=  ;Определяем изменение статуса
n26=  if ((!$away) && ($1)) %state = go.away
n27=  if (($away) && ($1)) %state = ch.away
n28=  if ((!$away) && (!$1)) %state = no.away
n29=  if (($away) && (!$1)) %state = re.away
n30=  if ((%state == ch.away) && ($1- == $awaymsg)) %state = nc.away
n31=
n32=  ;создание списков каналов
n33=  if (%prefs.away.mesmode) {
n34=    while (%i <= $chan(0)) {
n35=      %color = $changet($chan(%i),colors)
n36=      if ((%color == 1) || (((%color == 2) || (%color == $null)) && (c !isincs $chan(%i).mode))) {
n37=        if (!$changet($chan(%i),aways)) %colorchans = $addtok(%colorchans,$chan(%i),44)
n38=      }
n39=      else { if (!$changet($chan(%i),aways)) %ncolorchans = $addtok(%ncolorchans,$chan(%i),44) }
n40=      inc %i
n41=    }
n42=  }
n43=
n44=  ;Уходим
n45=  if (%state == go.away) {
n46=    if (%oldnick [ $+ [ $cid ] ] != $me) {
n47=      if (%prefs.away.nickmode == 1) { %oldnick [ $+ [ $cid ] ] = $me | if (%str.away.nick != $me) nick $ifmatch }
n48=      if (%prefs.away.nickmode == 3) { %oldnick [ $+ [ $cid ] ] = $me | if (%oldnick [ $+ [ $cid ] ] $+ %str.away.end != $me) nick $ifmatch }
n49=      if (%prefs.away.nickmode == 2) { %oldnick [ $+ [ $cid ] ] = $me | if (%str.away.pre $+ %oldnick [ $+ [ $cid ] ] != $me) nick $ifmatch }
n50=      if (%prefs.away.nickmode == 4) { %oldnick [ $+ [ $cid ] ] = $me | if (%str.away.pre $+ %oldnick [ $+ [ $cid ] ]  $+ %str.away.end != $me) nick $ifmatch }
n51=    }
n52=    if (%prefs.away.mes) {
n53=      if ($istok(notice msg,%prefs.away.mesmode,32)) %awaymes = [ [ %str.away.msg ] ]
n54=      if (%prefs.away.mesmode == describe) %awaymes = ACTION [ [ %str.away.msg ] ] $+ 
n55=      if (%prefs.away.mesmode) { 
n56=        %i = 1
n57=        %message = [ [ %str.away.msg ] ]
n58=        while (%i <= $chan(0)) {
n59=          if ($istok(%colorchans,$chan(%i),44)) echo %colors.info -t $chan(%i) %message
n60=          else echo %colors.info -t $chan(%i) $strip(%message)
n61=          inc %i
n62=        }
n63=      }
n64=    }
n65=    .timeraway $+ $cid 0 $calc(60 * %nums.away.rep.mins) away.rep.msg
n66=  }
n67=
n68=  ;Возвращаемся
n69=  if (%state == re.away) {
n70=    if (%prefs.away.nickmode && (%oldnick [ $+ [ $cid ] ] ) && (%oldnick [ $+ [ $cid ] ] != $me)) { nick %oldnick [ $+ [ $cid ] ] | unset %oldnick [ $+ [ $cid ] ] }
n71=    if (%prefs.away.mes) {
n72=      if ($istok(notice msg,%prefs.away.mesmode,32)) %awaymes = [ [ %str.away.return ] ]
n73=      if (%prefs.away.mesmode == describe) %awaymes = ACTION [ [ %str.away.return ] ] $+ 
n74=      if (%prefs.away.mesmode) { 
n75=        %i = 1
n76=        %message = [ [ %str.away.return ] ]
n77=        while (%i <= $chan(0)) {
n78=          if ($istok(%colorchans,$chan(%i),44)) echo %colors.info -t $chan(%i) %message
n79=          else echo %colors.info -t $chan(%i) $strip(%message)
n80=          inc %i
n81=        }
n82=      }
n83=    }
n84=    .timeraway $+ $cid off
n85=  }
n86=
n87=  ;Меняем причину
n88=  if (%state == ch.away) {
n89=    if (%prefs.away.mes) {
n90=      if ($istok(notice msg,%awaycmd,32)) %awaymes = [ [ %str.away.change ] ]
n91=      if (%prefs.away.mesmode == describe) %awaymes = ACTION [ [ %str.away.change ] ] $+ 
n92=      if (%prefs.away.mesmode) { 
n93=        %i = 1
n94=        %message = [ [ %str.away.change ] ]
n95=        while (%i <= $chan(0)) {
n96=          if ($istok(%colorchans,$chan(%i),44)) echo %colors.info -t $chan(%i) %message
n97=          else echo %colors.info -t $chan(%i) $strip(%message)
n98=          inc %i
n99=        }
n100=      }
n101=    }
n102=    .timeraway $+ $cid 0 $calc(60 * %nums.away.rep.mins) away.rep.msg
n103=  }
n104=
n105=  if (%state == no.away) {
n106=  }
n107=  if (%state == nc.away) {
n108=    echo %colors.info -at $network $+ : %str.away.nochange
n109=    return
n110=  }
n111=
n112=  ;Сообщаем
n113=  if (%prefs.away.mes) {
n114=    if (%prefs.away.mesmode)  {
n115=      if ($istok(describe msg,%prefs.away.mesmode,32)) %awaycmd = .raw privmsg
n116=      if (%prefs.away.mesmode == notice) %awaycmd = .raw NOTICE
n117=    }
n118=    if (%colorchans) %awaycmd %colorchans : $+ %awaymes
n119=    if (%ncolorchans) %awaycmd %ncolorchans : $+ $strip(%awaymes)
n120=  }
n121=  ;Меняем режим
n122=  .raw away : $+ $1-
n123=}
n124=
n125=away.rep.msg {
n126=  if (!%prefs.away.mesmid || (!$away)) return
n127=  if (%prefs.away.mes) return
n128=  var %awaycmd = %prefs.away.mesmode , %i = 1, %colorchans, %ncolorchans, %awaymes, %color
n129=  if (%awaycmd) {
n130=    while (%i <= $chan(0)) {
n131=      %color = $changet($chan(%i),colors)
n132=      if ((%color == 1) || (((%color == 2) || (%color  == $null)) && (c !isincs $chan(%i).mode))) {
n133=      if (!$changet($chan(%i),aways))  %colorchans = $addtok(%colorchans,$chan(%i),44) }
n134=      else {  if (!$changet($chan(%i),aways))  %ncolorchans = $addtok(%ncolorchans,$chan(%i),44) }
n135=      inc %i
n136=    }
n137=  }
n138=  if ($istok(notice msg,%awaycmd,32)) %awaymes = [ [ %str.away.repeat ] ]
n139=  if (%awaycmd == describe) %awaymes = ACTION [ [ %str.away.repeat ] ] $+ 
n140=  if ($istok(describe msg,%awaycmd,32)) %awaycmd = .raw privmsg
n141=  if (%awaycmd == notice) %awaycmd = .raw NOTICE
n142=
n143=  if (%colorchans) %awaycmd %colorchans : $+ %awaymes
n144=  if (%ncolorchans) %awaycmd %ncolorchans : $+ $strip(%awaymes)
n145=  if ((%colorchans) || (%ncolorchans)) echo -a $iif(%colorchans %ncolorchans,10Об отсутствии сообщено:) $iif(%colorchans,с цветами на %colorchans $+ 10) $iif(%ncolorchans,без цветов на %ncolorchans)
n146=}
n147=
n148=;####################help########################
n149=key.layout {
n150=  window -ak0z @Раскладка
n151=  clear @Раскладка
n152=  aline %colors.system @Раскладка F1 Открыть файл помощи
n153=  aline %colors.system @Раскладка F2
n154=  aline %colors.system @Раскладка F3
n155=  aline %colors.system @Раскладка F4
n156=  aline %colors.system @Раскладка F5 Перемешать строку
n157=  aline %colors.system @Раскладка F6 Сообщение на все открытые каналы
n158=  aline %colors.system @Раскладка F7 Действие (№ник заменяется на выделенный ник)
n159=  aline %colors.system @Раскладка F8 Действие на все каналы
n160=  aline %colors.system @Раскладка F9
n161=  aline %colors.system @Раскладка F10
n162=  aline %colors.system @Раскладка F11
n163=  aline %colors.system @Раскладка F12
n164=  aline %colors.system @Раскладка -
n165=  aline %colors.system @Раскладка Control+F1
n166=  aline %colors.system @Раскладка Control+F2
n167=  aline %colors.system @Раскладка Control+F3
n168=  aline %colors.system @Раскладка Control+F4
n169=  aline %colors.system @Раскладка Control+F5 Пробел после каждой буквы
n170=  aline %colors.system @Раскладка Control+F6
n171=  aline %colors.system @Раскладка Control+F7
n172=  aline %colors.system @Раскладка Control+F8
n173=  aline %colors.system @Раскладка Control+F9 Перевод строки на русский
n174=  aline %colors.system @Раскладка Control+F10 Перевод строки на английский
n175=  aline %colors.system @Раскладка Control+F11
n176=  aline %colors.system @Раскладка Control+F12
n177=  aline %colors.system @Раскладка -
n178=  aline %colors.system @Раскладка Shift+F1
n179=  aline %colors.system @Раскладка Shift+F2
n180=  aline %colors.system @Раскладка Shift+F3
n181=  aline %colors.system @Раскладка Shift+F4
n182=  aline %colors.system @Раскладка Shift+F5 Раскраска строки радугой
n183=  aline %colors.system @Раскладка Shift+F6 Сообщение на все открытые каналы
n184=  aline %colors.system @Раскладка Shift+F7 Действие на канал
n185=  aline %colors.system @Раскладка Shift+F8 Действие на все каналы
n186=  aline %colors.system @Раскладка Shift+F9
n187=  aline %colors.system @Раскладка Shift+F10
n188=  aline %colors.system @Раскладка Shift+F11
n189=  aline %colors.system @Раскладка Shift+F12
n190=}
n191=
n192=key.ascii {
n193=  window -ak0z  @ASCII
n194=  clear @ASCII
n195=  var %i = 0,%str, %j = 1
n196=  while (%i <= 255) {
n197=    ;    %str = %str $chr(127) %i $+ $chr(9) $+ $chr( $+ $iif(!$istok(2 9 22 31,%i,32),%i) $+ ) $+ $chr(9)
n198=    %str = %str  $+ %colors.info $+ $chr(127) $+  $str(0,$calc(4 - $len(%i))) $+ %i $iif(!$istok(0 2 3 9 15 22 31,%i,32), $+ %colors.highlight $+ $chr(%i) $+ , $+ %colors.info $+ -)
n199=    if (%j = 8) { echo %colors.normal @ASCII %str  $+ %colors.info $+ $chr(127) | %str = $null | %j = 0 }
n200=    inc %i | inc %j
n201=  }
n202=  if (%str) echo %colors.normal @ASCII %str
n203=}
